---
layout:     post
title:      macOS 上的 Visual Studio Code 配置
subtitle:   C/C++, Python, Fortran, 适用于 Apple Silicon
date:       2021-12-17
author:     Rain Chen
catalog: true
tags:
    - Mac
    - 开发与应用
---

Contents
- unordered list
{:toc}

# macOS 上的 Visual Studio Code 配置

## C/C++ 编译调试配置

### settings.json 文件配置

- 需要安装`Code Runner`扩展。

```json
{
    "code-runner.runInTerminal": true
}
```

作用：在 VS Code 的集成终端里运行程序，可以输入与输出。

### launch.json 文件配置

- 需要安装`C/C++`扩展
- 需要安装`CodeLLDB`扩展
- 需要安装`C/C++ Clang Command Adapter`扩展

```json
{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "type": "lldb",
            "request": "launch",
            "name": "C/C++: Debug",
            "program": "${fileDirname}/${fileBasenameNoExtension}",
            "args": [],
            "cwd": "${workspaceFolder}"
        }
    ]
}
```

在原来的配置文件的基础上修改为以上内容。其中`"program": "${fileDirname}/${fileBasenameNoExtension}"`是说明生成二进制文件的位置。`"cwd"`一栏填工作文件夹`"${workspaceFolder}"`即可。

### tasks.json 文件配置

```json
{
    "tasks": [
        {
            "type": "cppbuild",
            "label": "C/C++: clang++ build active file",
            "command": "/usr/bin/clang++",
            "args": [
                "-std=c++17",
                "-g",
                "${file}",
                "-o",
                "${fileDirname}/${fileBasenameNoExtension}"
            ],
            "options": {
                "cwd": "${fileDirname}"
            },
            "problemMatcher": [
                "$gcc"
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "detail": "Task generated by Debugger."
        }
    ],
    "version": "2.0.0"
}

```

其中的`"args": []`里的是编译指令，根据你所使用的编译器来写，例如我的`"command": "usr/bin/clang++"`的编译指令就写在`"args": []`里面了。

## Python 编译调试配置

### settings.json 文件配置

- 需要安装`Python`扩展
- 需要安装一个版本的`Python`

```json
{
    "code-runner.runInTerminal": true,
    "python.pythonPath": "/usr/local/bin/python3"
}
```

要在`settings.json`文件中添加`Python`解释器的路径。

### launch.json 文件配置

```json
{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Python: Current File",
            "type": "python",
            "request": "launch",
            "program": "${file}",
            "console": "integratedTerminal"
        }
    ]
}
```

默认设置即可。

### tasks.json 文件配置

可以暂时不用。

## Fortran 编译调试配置

- 需要安装`gfortran`编译器
- 需要安装`Modern Fortran`扩展
- 需要安装`Fortran Breakpoint Support`扩展

### settings.json 文件配置

```json
{
    "code-runner.runInTerminal": true,
    "fortran.includePaths": [
        "/usr/local/include",
        "/usr/local",
        "/usr/local/bin"
    ],
    "fortran.symbols": [ "function", "subroutine"]
}
```

要在此文件中写上`fortran`编译器的目录，比如我的目录`usr/local/bin`。

### launch.json 文件配置

```json
{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
    {
        "type": "lldb",
        "request": "launch",
        "name": "Fortran: Debug",
        "program": "${fileDirname}/${fileBasenameNoExtension}",
        "args": [],
        "cwd": "${workspaceFolder}"
    }
    ]
}
```

这里是有关程序运行的设定。

### tasks.json 文件配置

```json
{
    "tasks": [
        {
            "type": "shell",
            "label": "Fortran: gfortran",
            "command": "gfortran",
            "args": [
                "${file}",
                "-o",
                "${fileDirname}/${fileBasenameNoExtension}"
            ],
            "options": {
                "cwd": "${fileDirname}"
            },
            "problemMatcher": [
                "$gcc"
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "detail": "Task generated by Debugger."
        }
    ],
    "version": "2.0.0"
}

```

这个文件是用来配置编译任务的，注意`"type"`、`"label"`以及`"command"`这几项需要自己写。

## 结尾

本文由 Rain Chen 自己摸索而成，仅供参考，不足之处，还请指出。

> 转载请注明来源：https://chen-rain.github.io
