---
layout:     post
title:      C/C++ "expected an expression"报错解决方案
subtitle:   Visual Studio Code
date:       2021-07-31
author:     Rain Chen
catalog: true
tags:
    - Mac
    - 开发与应用
---

Contents
- unordered list
{:toc}

# C/C++ "expected an expression" 报错解决方案

## 问题信息

在 Visual Studio Code下 编写 C++ 程序。其中一道习题，程序设计如下。

```cpp
// 3_7_3.cpp
#include <iostream>
int main()
{
    using namespace std;
    float deg;
    float min;
    float sec;
    cout << "Enter a latitude in degrees, minutes, and seconds: \n";
    cout << "First, enter the degrees: ";
    cin >> deg;
    cout << "Next, enter the minutes of arc: ";
    cin >> min;
    cout << "Finally, enter the seconds of arc: ";
    cin >> sec;
    float DEG;
    DEG = deg + min / 60 + sec / 3600;
    cout << deg << " degrees, " << min << " minutes, " << sec << " seconds = "
    << DEG << " degrees.";
    return 0;
}
```

写完之后，在 `cout << deg << "degrees, "...` 之前出现了红色波浪线，点击运行，程序可以正常运行，可以输出正确结果。但是提示有一个问题：

```
expected an expression C/C++ (29) [19,1]
```

## 问题原因

该程序使用了 C++11 的标准，而 Visual Studio Code 默认使用 C++98 标准，导致报错但可以正常运行。

## 解决方案

打开工作文件夹下的隐藏 `.vscode` 文件夹，打开其中的 `tasks.json` 文件。内容如下。

```json
{
    "tasks": [
        {
            "type": "cppbuild",
            "label": "C/C++: clang++ build active file",
            "command": "/usr/bin/clang++",
            "args": [
                "-g",
                "${file}",
                "-o",
                "${fileDirname}/${fileBasenameNoExtension}"
            ],
            "options": {
                "cwd": "${fileDirname}"
            },
            "problemMatcher": [
                "$gcc"
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "detail": "Task generated by Debugger."
        }
    ],
    "version": "2.0.0"
}
```

在 `"args"` 后中括号中加上一条 `"-std=c++11"` 并保存，注意 json 语法中的逗号位置。修改后内容如下。

```json
{
    "tasks": [
        {
            "type": "cppbuild",
            "label": "C/C++: clang++ build active file",
            "command": "/usr/bin/clang++",
            "args": [
                "-g",
                "${file}",
                "-o",
                "${fileDirname}/${fileBasenameNoExtension}",
                "-std=c++11"
            ],
            "options": {
                "cwd": "${fileDirname}"
            },
            "problemMatcher": [
                "$gcc"
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "detail": "Task generated by Debugger."
        }
    ],
    "version": "2.0.0"
}
```

回到 `.cpp` 源文件，错误提示消失了，程序可以正常编译运行。