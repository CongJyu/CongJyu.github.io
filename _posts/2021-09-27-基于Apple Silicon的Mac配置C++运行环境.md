---
layout:     post
title:      在基于 Apple Silicon 的 Mac 上配置 C++ 运行环境
subtitle:   Apple M1 芯片
date:       2021-09-27
author:     Rain Chen
catalog: true
tags:
    - Mac
    - 开发与应用
---

Contents
- unordered list
{:toc}

# 在基于 Apple Silicon 的 Mac 上使用 Visual Studio Code 简单搭建 C++ 开发环境<br>Building C++ dev environment with Visual Studio simply on Mac based on Apple Silicon

### 打开 Visual Studio Code，安装以下扩展<br>Open Visual Studio Code and install the following extensions

- C/C++
- C/C++ Clang Command Adapter
- Code Runner
- CodeLLDB

### 在 Visual Studio Code 中打开一个你认为合适的文件夹<br>Open a suitabale folder in Visual Studio Code
<br>
打开 Settings，点按 Workspace 选项卡，搜索「RunInTerminal」,勾选为 True。<br>Open Settings, click Workspace item, search "RunInTerminal", turn it on.<br>
<br>
新建或打开一个文件，命名为「helloworld.cpp」，输入以下内容。<br>
New or open a file, name as "helloworld.cpp", type the following code in it.

```cpp
// helloworld.cpp -- the first
#include <iostream>
int main()
{
    using namespace std;
    cout << "Hello world!";
    return 0;
}
```

点按右上角的绿色箭头运行。<br>Click the green arrow to run.<br>

### 在该文件夹中的隐藏文件如「settings.json」等，可以根据自己的需要进行修改和配置<br>The hidden files can be change and config when you need to, for example, the "settings.json" file

按下 ⌘Command+⇧Shift+. 来显示或不显示隐藏的文件和文件夹。<br>Press ⌘Command+⇧Shift+. to show or hide the hidden files or folders.<br><br>

## 在基于Apple Silicon的Mac上使用Visual Studio Code进行C++程序调试<br>Debug C++ program with Visual Studio simply on Mac based on Apple Silicon

### 你需要在 Visual Studio Code 中安装以下扩展<br>You need to install the following extensions

- C/C++
- CodeLLDB

### 在 Visual Studio Code 中打开你的工作文件夹<br>Open your workfolder in Visual Studio Code

打开一个实例，比如「helloworld.cpp」，然后按 F1 键，选择「C/C++: Build and Debug Active File」<br>Open an example, such as "helloworld.cpp", then press F1, select "C/C++: Build and Debug Active File"
<br>
<br>
Visual Studio Code 将会自动生成「tasks.json」的文件，内容如下<br>
Visual Studio Code will create "tasks.json" file automatically as follow<br>

```json
{
    "tasks": [
        {
            "type": "cppbuild",
            "label": "C/C++: clang++ build active file",
            "command": "/usr/bin/clang++",
            "args": [
                "-std=c++17",
                "-g",
                "${file}",
                "-o",
                "${fileDirname}/${fileBasenameNoExtension}"
            ],
            "options": {
                "cwd": "${fileDirname}"
            },
            "problemMatcher": [
                "$gcc"
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "detail": "Task generated by Debugger."
        }
    ],
    "version": "2.0.0"
}
```

### 选择左侧菜单栏的「调试」图标，点击「Create a launch.json fiile」<br>Choose "Debug" icon, click "Create a launch.json file"

选择「LLDB」选项，创建一个「launch.json」文件<br>Select "LLDB" option to create a "launch.json" file

```json
{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "type": "lldb",
            "request": "launch",
            "name": "Debug",
            "program": "${workspaceFolder}/<your program>",
            "args": [],
            "cwd": "${workspaceFolder}"
        }
    ]
}
```
<br>
把以上内容改为以下内容<br>Change the above to below

```json
{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "type": "lldb",
            "request": "launch",
            "name": "Debug",
            "program": "${fileDirname}/${fileBasenameNoExtension}",
            "args": [],
            "cwd": "${workspaceFolder}"
        }
    ]
}
```

### 最后，按 ⌘Command + ⇧Shift + B 编译<br>Finally, press ⌘Command + ⇧Shift + B to compile

按触控栏上的调试小箭头或 F5 进行调试<br>
Press the arrow on the Touchbar or F5 to debug<br>
<br><br>

> ⚠️注意：这个笔记是根据网络上的各种资料和文档进行总结归纳的，仅供参考<br>⚠️Attention: This note is a summary according to some pages and files on the Internet
